<script>

/* 利用　服务器头 CORS 策略进行跨域访问 */
/* 本例服务端的设置是 Access-Control-Allow-Origin: http://172.16.4.177 */

/* 发送　get 请求 */

fetch("http://127.0.0.1:8080", {
	method: 'GET', 
	mode: 'cors', 
	cache: 'default'
})
.then( response => {
	return response.json();
})
.then( ref => {
	console.log(ref)	
})
.catch(err => 
	console.log('Request Failed', err)
)

/* 发送　post json 请求 */

let obj = {name: "xx"}

let requestInstance = new Request("http://127.0.0.1:8080/users", {
	method: 'POST', 
	mode: 'cors', 
	body: JSON.stringify(obj),
	headers: {
		'Content-Type': 'application/json;charset=utf-8;'
	}
})

fetch(requestInstance).then( response => {
	return response.json();
})
.then( ref => {
	console.log(ref)	
})
.catch(err => 
	console.log('Request Failed', err)
)

</script>
